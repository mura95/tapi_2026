# æ­©æ•°è¨ˆæ©Ÿèƒ½

## 1. æ¦‚è¦

çŠ¬ã®æ­©æ•°ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼è‡ªèº«ã®æ­©æ•°ã‚’è¡¨ç¤ºã—ã€å¥åº·ç®¡ç†ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹æ©Ÿèƒ½ã€‚çŠ¬ã®æ­©æ•°ã‚’ç›®æ¨™ã«ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ­©ããƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é«˜ã‚ã‚‹ã€‚

---

## 2. æ©Ÿèƒ½ä»•æ§˜

### 2.1 åŸºæœ¬ã‚³ãƒ³ã‚»ãƒ—ãƒˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æ­©æ•°è¨ˆã®ã‚³ãƒ³ã‚»ãƒ—ãƒˆ                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚   ã€ŒçŠ¬ã®æ­©æ•°åˆ†ã€ã‚ãªãŸã‚‚æ­©ã“ã†ï¼ã€                           â”‚
â”‚                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚   â”‚   ğŸ• çŠ¬     â”‚   VS     â”‚   ğŸ‘Ÿ ã‚ãªãŸ â”‚                 â”‚
â”‚   â”‚  1,234 æ­©   â”‚          â”‚  2,456 æ­©   â”‚                 â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                                                             â”‚
â”‚   çŠ¬ã®æ­©æ•° â‰¦ ã‚ãªãŸã®æ­©æ•° â†’ ç›®æ¨™é”æˆï¼                      â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 æ­©æ•°ã®ç¨®é¡

| ç¨®é¡ | ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ | èª¬æ˜ |
|------|-------------|------|
| çŠ¬ã®æ­©æ•° | ãƒ¡ã‚¿ãƒãƒ¼ã‚¹æ•£æ­©æ™‚ã®ç§»å‹•è·é›¢ | çŠ¬ãŒãƒ¡ã‚¿ãƒãƒ¼ã‚¹ã§æ­©ã„ãŸè·é›¢ã‚’æ­©æ•°æ›ç®— |
| ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ­©æ•° | Google Fit / HealthKit | ç«¯æœ«ã®æ­©æ•°è¨ˆã‹ã‚‰å–å¾— |

### 2.3 çŠ¬ã®æ­©æ•°è¨ˆç®—

```csharp
// çŠ¬ã®æ­©æ•° = ãƒ¡ã‚¿ãƒãƒ¼ã‚¹ã§ã®ç§»å‹•è·é›¢ Ã· çŠ¬ã®1æ­©ã®è·é›¢
// çŠ¬ã®1æ­©ã®è·é›¢ = 0.3mï¼ˆå°å‹çŠ¬æƒ³å®šï¼‰

public int CalculateDogSteps(float distanceMeters)
{
    const float DOG_STEP_LENGTH = 0.3f; // meters
    return Mathf.FloorToInt(distanceMeters / DOG_STEP_LENGTH);
}
```

---

## 3. ç”»é¢è¨­è¨ˆ

### 3.1 æ­©æ•°è¨ˆç”»é¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â† æˆ»ã‚‹       æ­©æ•°è¨ˆ                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  ğŸ• ãŸã£ã·ã®æ­©æ•°             â”‚   â”‚
â”‚   â”‚                             â”‚   â”‚
â”‚   â”‚      1,234 æ­©               â”‚   â”‚ â† å¤§ããè¡¨ç¤ºï¼ˆ48spï¼‰
â”‚   â”‚                             â”‚   â”‚
â”‚   â”‚   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘     â”‚   â”‚ â† ç›®æ¨™ã«å¯¾ã™ã‚‹é€²æ—
â”‚   â”‚   ä»Šæ—¥ã®ç›®æ¨™: 3,000æ­©        â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  ğŸ‘Ÿ ã‚ãªãŸã®æ­©æ•°             â”‚   â”‚
â”‚   â”‚                             â”‚   â”‚
â”‚   â”‚      2,456 æ­©               â”‚   â”‚
â”‚   â”‚                             â”‚   â”‚
â”‚   â”‚   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘   â”‚   â”‚
â”‚   â”‚   ä»Šæ—¥ã®ç›®æ¨™: 3,000æ­©        â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  âœ¨ åŠ±ã¾ã—ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸         â”‚   â”‚
â”‚   â”‚                             â”‚   â”‚
â”‚   â”‚  ã€Œã„ã„ãƒšãƒ¼ã‚¹ã§ã™ã­ï¼ã€      â”‚   â”‚
â”‚   â”‚  ã€Œã‚ã¨ 544 æ­©ã§ç›®æ¨™é”æˆï¼ã€ â”‚   â”‚
â”‚   â”‚                             â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚   ğŸ“Š é€±é–“ã‚°ãƒ©ãƒ•ã‚’è¦‹ã‚‹        â”‚   â”‚ â† ã‚ªãƒ—ã‚·ãƒ§ãƒ³
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 UIè¦ç´ ä»•æ§˜

| è¦ç´  | ã‚µã‚¤ã‚º | å‚™è€ƒ |
|------|--------|------|
| æ­©æ•°è¡¨ç¤º | 48sp | å¤ªå­—ã€ä¸­å¤®æƒãˆ |
| ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ | é«˜ã•16dp | è§’ä¸¸ã€ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ |
| ç›®æ¨™ãƒ†ã‚­ã‚¹ãƒˆ | 16sp | ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ä¸‹ |
| åŠ±ã¾ã—ã‚«ãƒ¼ãƒ‰ | ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°16dp | èƒŒæ™¯è‰²ã‚ã‚Š |

### 3.3 ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼

```
0%                    50%                   100%
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘

ã‚«ãƒ©ãƒ¼:
  é”æˆéƒ¨åˆ†: ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆ#4ECDC4 â†’ #44A8B3ï¼‰
  æœªé”æˆéƒ¨åˆ†: #E0E0E0
```

---

## 4. æ­©æ•°ãƒ‡ãƒ¼ã‚¿å–å¾—

### 4.1 ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ åˆ¥å®Ÿè£…

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æ­©æ•°å–å¾—ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚              â”‚IPedometerServiceâ”‚  â† å…±é€šã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹    â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚                       â”‚                                     â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚         â†“             â†“             â†“                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚GoogleFit   â”‚â”‚HealthKit   â”‚â”‚   Mock     â”‚               â”‚
â”‚  â”‚Manager    â”‚â”‚Manager     â”‚â”‚  Manager   â”‚               â”‚
â”‚  â”‚(Android)  â”‚â”‚  (iOS)     â”‚â”‚ (Editor)   â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 IPedometerService ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹

```csharp
using System;
using Cysharp.Threading.Tasks;

namespace TapHouse.Pocket.Pedometer
{
    public interface IPedometerService
    {
        /// <summary>
        /// æ­©æ•°è¨ˆãŒåˆ©ç”¨å¯èƒ½ã‹
        /// </summary>
        bool IsAvailable { get; }

        /// <summary>
        /// æ¨©é™ãŒã‚ã‚‹ã‹
        /// </summary>
        bool HasPermission { get; }

        /// <summary>
        /// æ¨©é™ã‚’ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
        /// </summary>
        UniTask<bool> RequestPermission();

        /// <summary>
        /// ä»Šæ—¥ã®æ­©æ•°ã‚’å–å¾—
        /// </summary>
        UniTask<int> GetTodaySteps();

        /// <summary>
        /// æŒ‡å®šæ—¥ã®æ­©æ•°ã‚’å–å¾—
        /// </summary>
        UniTask<int> GetSteps(DateTime date);

        /// <summary>
        /// é€±é–“æ­©æ•°ã‚’å–å¾—
        /// </summary>
        UniTask<int[]> GetWeeklySteps();
    }
}
```

### 4.3 Androidå®Ÿè£…ï¼ˆGoogle Fitï¼‰

```csharp
#if UNITY_ANDROID && !UNITY_EDITOR
using UnityEngine;
using Cysharp.Threading.Tasks;

namespace TapHouse.Pocket.Pedometer
{
    public class GoogleFitManager : IPedometerService
    {
        private AndroidJavaObject fitnessClient;

        public bool IsAvailable => CheckGoogleFitAvailable();
        public bool HasPermission => CheckPermission();

        public async UniTask<bool> RequestPermission()
        {
            using var unityPlayer = new AndroidJavaClass("com.unity3d.player.UnityPlayer");
            using var activity = unityPlayer.GetStatic<AndroidJavaObject>("currentActivity");

            // Google Fitæ¨©é™ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
            // GoogleSignIn + FITNESS_READæ¨©é™

            return await RequestFitnessPermission(activity);
        }

        public async UniTask<int> GetTodaySteps()
        {
            var startTime = GetTodayStartMillis();
            var endTime = GetCurrentMillis();

            return await ReadStepCount(startTime, endTime);
        }

        private async UniTask<int> ReadStepCount(long startTime, long endTime)
        {
            // Google Fit History API ã‚’ä½¿ç”¨
            // DataType.TYPE_STEP_COUNT_DELTA ã‚’èª­ã¿å–ã‚Š

            // å®Ÿè£…è©³ç´°ã¯çœç•¥
            return 0;
        }

        private bool CheckGoogleFitAvailable()
        {
            // Google Play Services ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
            return true;
        }

        private bool CheckPermission()
        {
            // FITNESS_READæ¨©é™ã®ç¢ºèª
            return false;
        }
    }
}
#endif
```

### 4.4 iOSå®Ÿè£…ï¼ˆHealthKitï¼‰

```csharp
#if UNITY_IOS && !UNITY_EDITOR
using UnityEngine;
using Cysharp.Threading.Tasks;
using System.Runtime.InteropServices;

namespace TapHouse.Pocket.Pedometer
{
    public class HealthKitManager : IPedometerService
    {
        [DllImport("__Internal")]
        private static extern bool _IsHealthKitAvailable();

        [DllImport("__Internal")]
        private static extern void _RequestHealthKitPermission(string callback);

        [DllImport("__Internal")]
        private static extern void _GetStepCount(long startTime, long endTime, string callback);

        public bool IsAvailable => _IsHealthKitAvailable();
        public bool HasPermission { get; private set; }

        public async UniTask<bool> RequestPermission()
        {
            var tcs = new UniTaskCompletionSource<bool>();

            // ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯è¨­å®š
            _RequestHealthKitPermission("OnHealthKitPermissionResult");

            // çµæœã‚’å¾…æ©Ÿ
            return await tcs.Task;
        }

        public async UniTask<int> GetTodaySteps()
        {
            var tcs = new UniTaskCompletionSource<int>();

            var startTime = GetTodayStartUnixTime();
            var endTime = GetCurrentUnixTime();

            _GetStepCount(startTime, endTime, "OnStepCountResult");

            return await tcs.Task;
        }
    }
}
#endif
```

---

## 5. çŠ¬ã®æ­©æ•°ç®¡ç†

### 5.1 DogStepManager

```csharp
using UnityEngine;
using Cysharp.Threading.Tasks;
using Firebase.Database;

namespace TapHouse.Pocket.Pedometer
{
    public class DogStepManager : MonoBehaviour
    {
        private const float DOG_STEP_LENGTH = 0.3f; // meters

        private DatabaseReference stepsRef;
        private int todaySteps = 0;

        public int TodaySteps => todaySteps;

        public async UniTask Initialize()
        {
            var userId = FirebaseManager.UserId;
            stepsRef = FirebaseDatabase.DefaultInstance
                .GetReference($"users/{userId}/dogSteps");

            // ä»Šæ—¥ã®æ­©æ•°ã‚’èª­ã¿è¾¼ã¿
            await LoadTodaySteps();

            // ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°ã‚’è³¼èª­
            stepsRef.Child(GetTodayKey()).ValueChanged += OnStepsChanged;
        }

        public async UniTask AddSteps(float distanceMeters)
        {
            int steps = Mathf.FloorToInt(distanceMeters / DOG_STEP_LENGTH);
            todaySteps += steps;

            // Firebaseæ›´æ–°
            await stepsRef.Child(GetTodayKey()).SetValueAsync(todaySteps);
        }

        private async UniTask LoadTodaySteps()
        {
            var snapshot = await stepsRef.Child(GetTodayKey()).GetValueAsync();

            if (snapshot.Exists)
            {
                todaySteps = int.Parse(snapshot.Value.ToString());
            }
        }

        private void OnStepsChanged(object sender, ValueChangedEventArgs args)
        {
            if (args.Snapshot.Exists)
            {
                todaySteps = int.Parse(args.Snapshot.Value.ToString());
            }
        }

        private string GetTodayKey()
        {
            return DateTime.UtcNow.ToString("yyyy-MM-dd");
        }
    }
}
```

### 5.2 Firebaseæ§‹é€ 

```
users/{userId}/dogSteps/
â”œâ”€â”€ 2026-01-20: 1234
â”œâ”€â”€ 2026-01-21: 2345
â”œâ”€â”€ 2026-01-22: 3456
â””â”€â”€ ...
```

---

## 6. åŠ±ã¾ã—ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸

### 6.1 ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ‘ã‚¿ãƒ¼ãƒ³

| æ¡ä»¶ | ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ |
|------|-----------|
| ãƒ¦ãƒ¼ã‚¶ãƒ¼æ­©æ•° < çŠ¬ã®æ­©æ•° Ã— 0.3 | ã€Œä»Šæ—¥ã¯ã¾ã ã“ã‚Œã‹ã‚‰ï¼å°‘ã—ãšã¤æ­©ãã¾ã—ã‚‡ã†ã€ |
| ãƒ¦ãƒ¼ã‚¶ãƒ¼æ­©æ•° < çŠ¬ã®æ­©æ•° Ã— 0.5 | ã€Œã„ã„èª¿å­ã§ã™ï¼ã‚‚ã†å°‘ã—ã§æŠ˜ã‚Šè¿”ã—ã€ |
| ãƒ¦ãƒ¼ã‚¶ãƒ¼æ­©æ•° < çŠ¬ã®æ­©æ•° Ã— 0.8 | ã€Œã‚ã¨å°‘ã—ï¼é ‘å¼µã£ã¦ï¼ã€ |
| ãƒ¦ãƒ¼ã‚¶ãƒ¼æ­©æ•° < çŠ¬ã®æ­©æ•° | ã€Œã‚‚ã†ã™ãè¿½ã„ã¤ãã¾ã™ï¼ã‚ã¨ {X} æ­©ã€ |
| ãƒ¦ãƒ¼ã‚¶ãƒ¼æ­©æ•° â‰§ çŠ¬ã®æ­©æ•° | ã€Œã™ã”ã„ï¼çŠ¬ã®æ­©æ•°ã‚’è¶…ãˆã¾ã—ãŸï¼ã€ |

### 6.2 å®Ÿè£…

```csharp
public class EncouragementMessageProvider
{
    public string GetMessage(int dogSteps, int userSteps)
    {
        if (dogSteps == 0) return "ä»Šæ—¥ã‚‚å…ƒæ°—ã«æ­©ãã¾ã—ã‚‡ã†ï¼";

        float ratio = (float)userSteps / dogSteps;

        if (ratio >= 1.0f)
        {
            return "ã™ã”ã„ï¼çŠ¬ã®æ­©æ•°ã‚’è¶…ãˆã¾ã—ãŸï¼";
        }
        else if (ratio >= 0.8f)
        {
            int remaining = dogSteps - userSteps;
            return $"ã‚‚ã†ã™ãè¿½ã„ã¤ãã¾ã™ï¼ã‚ã¨ {remaining:N0} æ­©";
        }
        else if (ratio >= 0.5f)
        {
            return "ã„ã„èª¿å­ã§ã™ï¼ã‚‚ã†å°‘ã—ã§æŠ˜ã‚Šè¿”ã—";
        }
        else if (ratio >= 0.3f)
        {
            return "ã„ã„ãƒšãƒ¼ã‚¹ã§ã™ã­ï¼";
        }
        else
        {
            return "ä»Šæ—¥ã¯ã¾ã ã“ã‚Œã‹ã‚‰ï¼å°‘ã—ãšã¤æ­©ãã¾ã—ã‚‡ã†";
        }
    }
}
```

---

## 7. é€±é–“ã‚°ãƒ©ãƒ•

### 7.1 ã‚°ãƒ©ãƒ•ç”»é¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â† æˆ»ã‚‹      é€±é–“ã‚°ãƒ©ãƒ•              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  ğŸ• çŠ¬    ğŸ‘Ÿ ã‚ãªãŸ         â”‚   â”‚ â† å‡¡ä¾‹
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚   5000 â”¤                            â”‚
â”‚   4000 â”¤        â–…                   â”‚
â”‚   3000 â”¤  â–ˆ  â–…  â–ˆ  â–…                â”‚ â† æ£’ã‚°ãƒ©ãƒ•
â”‚   2000 â”¤  â–ˆ  â–ˆ  â–ˆ  â–ˆ  â–ˆ  â–…          â”‚
â”‚   1000 â”¤  â–ˆ  â–ˆ  â–ˆ  â–ˆ  â–ˆ  â–ˆ  â–ˆ       â”‚
â”‚      0 â”¼â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€     â”‚
â”‚        æœˆ  ç«  æ°´  æœ¨  é‡‘  åœŸ  æ—¥    â”‚
â”‚                                     â”‚
â”‚   åˆè¨ˆ: çŠ¬ 18,234æ­© / ã‚ãªãŸ 22,456æ­©â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.2 ã‚°ãƒ©ãƒ•ä»•æ§˜

| é …ç›® | ä»•æ§˜ |
|------|------|
| è¡¨ç¤ºæœŸé–“ | éå»7æ—¥é–“ |
| ãƒ‡ãƒ¼ã‚¿ | çŠ¬ã®æ­©æ•°ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ­©æ•° |
| ã‚°ãƒ©ãƒ•ç¨®é¡ | æ£’ã‚°ãƒ©ãƒ•ï¼ˆä¸¦åˆ—è¡¨ç¤ºï¼‰ |
| ã‚«ãƒ©ãƒ¼ | çŠ¬: ã‚ªãƒ¬ãƒ³ã‚¸ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼: ãƒ†ã‚£ãƒ¼ãƒ« |

---

## 8. æ¨©é™ãƒªã‚¯ã‚¨ã‚¹ãƒˆ

### 8.1 Androidï¼ˆGoogle Fitï¼‰

```xml
<!-- AndroidManifest.xml -->
<uses-permission android:name="android.permission.ACTIVITY_RECOGNITION" />

<!-- Google Fit OAuth -->
<uses-permission android:name="com.google.android.gms.permission.ACTIVITY_RECOGNITION" />
```

### 8.2 iOSï¼ˆHealthKitï¼‰

```xml
<!-- Info.plist -->
<key>NSHealthShareUsageDescription</key>
<string>æ­©æ•°ã‚’è¡¨ç¤ºã™ã‚‹ãŸã‚ã«ã€ãƒ˜ãƒ«ã‚¹ã‚±ã‚¢ã®æ­©æ•°ãƒ‡ãƒ¼ã‚¿ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¾ã™ã€‚</string>
<key>NSHealthUpdateUsageDescription</key>
<string>æ­©æ•°ã‚’è¨˜éŒ²ã™ã‚‹ãŸã‚ã«ã€ãƒ˜ãƒ«ã‚¹ã‚±ã‚¢ã®æ­©æ•°ãƒ‡ãƒ¼ã‚¿ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¾ã™ã€‚</string>
```

### 8.3 æ¨©é™ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ•ãƒ­ãƒ¼

```
æ­©æ•°è¨ˆç”»é¢ã‚’é–‹ã
       â†“
æ¨©é™ãƒã‚§ãƒƒã‚¯
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
â†“             â†“
æ¨©é™ã‚ã‚Š       æ¨©é™ãªã—
â†“             â†“
æ­©æ•°è¡¨ç¤º    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ æ¨©é™ãƒªã‚¯ã‚¨ã‚¹ãƒˆç”»é¢   â”‚
            â”‚                     â”‚
            â”‚ ã€Œæ­©æ•°ã‚’è¡¨ç¤ºã™ã‚‹ã«ã¯ â”‚
            â”‚  æ¨©é™ãŒå¿…è¦ã§ã™ã€    â”‚
            â”‚                     â”‚
            â”‚ [è¨±å¯ã™ã‚‹] [å¾Œã§]    â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
              â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
              â†“           â†“
            è¨±å¯        æ‹’å¦
              â†“           â†“
           æ­©æ•°è¡¨ç¤º   ã€Œæ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“ã€
                      ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
```

---

## 9. ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹

| # | ãƒ†ã‚¹ãƒˆå†…å®¹ | æœŸå¾…çµæœ |
|---|-----------|---------|
| 1 | æ­©æ•°è¨ˆç”»é¢ã‚’é–‹ã | çŠ¬ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ­©æ•°è¡¨ç¤º |
| 2 | æ¨©é™ãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼ˆè¨±å¯ï¼‰ | æ­©æ•°ãŒå–å¾—ãƒ»è¡¨ç¤ºã•ã‚Œã‚‹ |
| 3 | æ¨©é™ãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼ˆæ‹’å¦ï¼‰ | ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º |
| 4 | æ—¥ä»˜ãŒå¤‰ã‚ã£ãŸ | æ­©æ•°ãŒ0ã«ãƒªã‚»ãƒƒãƒˆ |
| 5 | çŠ¬ãŒãƒ¡ã‚¿ãƒãƒ¼ã‚¹ã§æ­©ã | çŠ¬ã®æ­©æ•°ãŒå¢—åŠ  |
| 6 | ç›®æ¨™é”æˆ | ãŠç¥ã„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º |
| 7 | é€±é–“ã‚°ãƒ©ãƒ•ã‚’é–‹ã | 7æ—¥é–“ã®ãƒ‡ãƒ¼ã‚¿è¡¨ç¤º |
| 8 | ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ | ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ‡ãƒ¼ã‚¿è¡¨ç¤º |

---

## 10. æ–°è¦ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§

| ãƒ•ã‚¡ã‚¤ãƒ« | å½¹å‰² |
|----------|------|
| `Assets/Scripts/Pocket/Pedometer/IPedometerService.cs` | å…±é€šã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ |
| `Assets/Scripts/Pocket/Pedometer/GoogleFitManager.cs` | Androidæ­©æ•°å–å¾— |
| `Assets/Scripts/Pocket/Pedometer/HealthKitManager.cs` | iOSæ­©æ•°å–å¾— |
| `Assets/Scripts/Pocket/Pedometer/MockPedometerService.cs` | Editorç”¨ãƒ¢ãƒƒã‚¯ |
| `Assets/Scripts/Pocket/Pedometer/DogStepManager.cs` | çŠ¬ã®æ­©æ•°ç®¡ç† |
| `Assets/Scripts/Pocket/Pedometer/PedometerUI.cs` | æ­©æ•°è¨ˆUI |
| `Assets/Scripts/Pocket/Pedometer/WeeklyGraphUI.cs` | é€±é–“ã‚°ãƒ©ãƒ•UI |
| `Assets/Plugins/iOS/HealthKitBridge.mm` | iOS ãƒã‚¤ãƒ†ã‚£ãƒ–ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ |
