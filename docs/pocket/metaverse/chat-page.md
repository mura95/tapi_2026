# チャットページ（実装後回し）

## 1. 概要

メタバース内でのテキストチャット機能。音声通話が難しい場合の代替手段として提供。

**注意:** この機能は実装優先度が低く、Phase 4で実装予定。

---

## 2. 実装後回しの理由

| 理由 | 説明 |
|------|------|
| 高齢者の入力負担 | テキスト入力は高齢者にとって負担が大きい |
| 音声通話優先 | 直接会話の方が自然なコミュニケーション |
| 開発リソース | コア機能を優先 |

---

## 3. 代替機能（先行実装）

音声通話が難しい場合の代替として、以下の機能を先行実装：

### 3.1 定型メッセージ

```
┌─────────────────────────────────────┐
│         クイックメッセージ           │
├─────────────────────────────────────┤
│                                     │
│   ┌─────────┐  ┌─────────┐         │
│   │こんにちは│  │ありがとう│         │
│   └─────────┘  └─────────┘         │
│                                     │
│   ┌─────────┐  ┌─────────┐         │
│   │バイバイ  │  │また会おう│         │
│   └─────────┘  └─────────┘         │
│                                     │
│   ┌─────────┐  ┌─────────┐         │
│   │かわいい！│  │元気？    │         │
│   └─────────┘  └─────────┘         │
│                                     │
└─────────────────────────────────────┘
```

### 3.2 エモート/ジェスチャー

```
┌─────────────────────────────────────┐
│           エモート                  │
├─────────────────────────────────────┤
│                                     │
│   ┌─────┐  ┌─────┐  ┌─────┐       │
│   │ 👋  │  │ 🙇  │  │ 👏  │       │
│   │手を振る│  │お辞儀│  │ 拍手 │       │
│   └─────┘  └─────┘  └─────┘       │
│                                     │
│   ┌─────┐  ┌─────┐  ┌─────┐       │
│   │ ❤️  │  │ 😊  │  │ 🎉  │       │
│   │ハート│  │笑顔  │  │お祝い│       │
│   └─────┘  └─────┘  └─────┘       │
│                                     │
└─────────────────────────────────────┘
```

---

## 4. 将来の実装予定

### 4.1 チャット画面（Phase 4）

```
┌─────────────────────────────────────┐
│ ← 戻る       チャット               │
├─────────────────────────────────────┤
│                                     │
│   ┌─────────────────────────────┐   │
│   │ 田中さん  10:30              │   │
│   │ 「こんにちは！」             │   │
│   └─────────────────────────────┘   │
│                                     │
│   ┌─────────────────────────────┐   │
│   │              あなた  10:31   │   │
│   │     「こんにちは！元気？」   │   │
│   └─────────────────────────────┘   │
│                                     │
│   ┌─────────────────────────────┐   │
│   │ 田中さん  10:32              │   │
│   │ 「元気です！」               │   │
│   └─────────────────────────────┘   │
│                                     │
├─────────────────────────────────────┤
│   ┌─────────────────────────────┐   │
│   │ メッセージを入力...          │   │
│   └─────────────────────────────┘   │
│   [定型] [スタンプ]        [送信]   │
└─────────────────────────────────────┘
```

### 4.2 機能一覧（将来）

| 機能 | 説明 | 優先度 |
|------|------|--------|
| テキスト入力 | フリーテキスト送信 | 低 |
| 定型メッセージ | ワンタップ送信 | 中 |
| スタンプ | イラストスタンプ | 中 |
| 既読表示 | 相手が読んだか確認 | 低 |
| 翻訳 | 多言語対応 | 低 |

---

## 5. 高齢者向け配慮（将来実装時）

### 5.1 入力支援

| 機能 | 説明 |
|------|------|
| 大きなキーボード | 50キー以上の大きさ |
| 音声入力 | 話して入力 |
| 予測変換 | よく使う言葉を優先 |
| 定型文優先 | ワンタップで送信 |

### 5.2 表示配慮

| 機能 | 説明 |
|------|------|
| 大きな文字 | 20sp以上 |
| 高コントラスト | 読みやすい配色 |
| 既読アイコン | わかりやすい表示 |
| 通知音 | 聞こえやすい音 |

---

## 6. Firebase構造（将来）

```
users/{userId}/metaverseChat/
├── conversations/
│   └── {conversationId}/
│       ├── participants: [userId1, userId2]
│       ├── lastMessage: "こんにちは"
│       └── lastUpdated: timestamp
└── messages/
    └── {conversationId}/
        └── {messageId}/
            ├── senderId: userId
            ├── text: "こんにちは"
            ├── type: "text" | "stamp" | "preset"
            ├── timestamp: timestamp
            └── read: boolean
```

---

## 7. 関連ドキュメント

| ドキュメント | 説明 |
|-------------|------|
| [pocket-metaverse-overview.md](./pocket-metaverse-overview.md) | メタバース概要 |
| [pocket-voice-call.md](./pocket-voice-call.md) | 音声通話（先行実装） |

---

## 8. メモ

- Phase 4まで実装を見送り
- 定型メッセージとエモートを先行実装
- 高齢者の入力負担を考慮した設計が必要
- 音声入力との連携を検討
